##### TUGAS 1 PKSJ
# Penetration Testing : Password Cracking  & SQL Injection
## Pendahuluan
Sistem Keamanan Jaringan adalah proses untuk mencegah dan mengidentifikasi pengguna yang tidak sah (penyusup) dari jaringan komputer.Tujuannya adalah untuk mengantisipasi resiko jaringan komputer berupa pencurian data atau penyalahgunaan hak akses.
Dalam keamanan jaringan terdapat berbagai metode yang bisa dilakukan untuk melakukan penetrasi atau menerobos keamanan jaringan 
tergantung pada target dan sasaran dari penetration. Salah satu metode yang dilakukan yaitu dengan SSH brute force attack untuk mendapatkan akses login ke remote machine yang menjadi target. 
Selain penyalahgunaan akses, gangguan keamanan jaringan juga dapat berupa pencurian data pada level database. Dalam kasus tersebut penetration tester dapat menggunakan metode SQL injection untuk mendapat informasi atau akses ke database target.

Pada simulasi penetration testing kali ini akan digunakan dua methode yaitu password cracking menggunakan SSH brute force attack dan SQL Injection. Pada simulasi ini juga akan dilakukan upaya countermeasure untuk menanggulangi serangan yang dilakukan dan mengukur efektifitas serangan.
## Dasar Teori
### Operating System
Sistem operasi (Operation System) adalah perangkat lunak (software) yang mengatur seluruh sumber daya dalam komputer.
Sistem operasi menjadi salah satu aspek penting dalam keamanan jaringan termasuk didalamnya kestabilan system, vurnerability dan 
ketersediaan tools keamanan pada operating system.
Pada pengujian ini akan digunakan dua Operating System yaitu Ubuntu Server dan Kali Linux.

#### Ubuntu Server
Linux Ubuntu Server adalah system operasi turunan dari Linux Ubuntu yang di desain khusus dengan kernel 
yang telah dikustomisasi untuk bekerja sebagai system operasi server. Kernel Linux Ubuntu Server di desain 
khusus untuk bisa bekerja dengan lebih dari satu proses (multiprocessor) dan menggunakan pennjadwalan deadline I/O.
Ubuntu Server dipilih untuk simulasi penetration testing karena Ubuntu Server memiliki lisensi open source dan merupakan
distro yang banyak digunakan untuk server serta merupakan turunan dari distro linux debian sehingga memiliki 
keamanan yang cukup tinggi. 

#### Kali Linux
Kali Linux adalah distribusi berlandasan distribusi Debian GNU/Linux untuk tujuan forensik digital dan di gunakan untuk pengujian 
penetrasi, yang dipelihara dan didanai oleh Offensive Security. Kali juga dikembangkan oleh  Offensive Security sebagai penerus BackTrack
Linux. Kali menyediakan pengguna akses yang mudah terhadap koleksi tools yang lengkap dan komprehensif untuk pengujian keamanan atau penetration testing.
Hal tersebut menjadi dasar memilih distro ini untuk digunakan sebagai OS penetration tester pada simulasi ini. Kali merupakan platform yang 
mendukung Metasploit Framework dari Proyek Metasploit, berupa alat untuk mengembangkan dan melaksanakan kode eksploit terhadap <i>remote host</i>. 
Distro ini juga menyertakan tools keamanan yang lengkap termasuk Wireshark, Ncrack, medusa, Nmap dan Aircrack-ng.

### Password Cracking : SSH Brute Force Attack
Password cracking adalah istilah umum yang menggambarkan sekelompok teknik yang digunakan untuk memperoleh password pada sebuah sistem 
data. Password cracking khusus mengacu pada proses mendapatkan password dari data yang yang dilindungi dengan password. 
Berikut adalah beberapa teknik umum yang digunakan dalam password cracking:
- Serangan Dictionary

Sebuah serangan yang merupakan cara tercepat dan terbaik dalam melumpuhkan mesin. Sebuah file dictionary (sebuah file teks yang berisi 
kamus password) diload pada aplikasi cracking (seperti L0phtCrack), yang dijalankan terhadap user account yang ditemukan oleh aplikasi 
tersebut. Karena sebagai besar password seringkali tergolong sederhana, menjalankan sebuah dictionary attack seringkali cukup membantu.
- Serangan Hybrid

Sebuah serangan hybrid adalah tingkat berikutnya jika password tidak dapat ditemukan dengan menggunakan dictionary attack. 
Serangan hybrid dimulai dengan file kamus dan pengganti angka atau simbol untuk karakter pada password. 
Misalnya, banyak pengguna menambahkan angka 1 atau yang lainnya pada password mereka untuk memenuhi persyaratan sandi yang kuat. 
Sebuah serangan hybrid dirancang untuk menemukan jenis-jenis anomali dalam password.
- Serangan Brute force

Bentuk serangan yang paling rumit dan biasanya memakan waktu yang sangat lama, tergantung kompleksitas password 
tersebut terkadang perlu waktu sampai seminggu guna menebak password. L0phtCrack seringkali digunakan untuk melakukan serangan 
brute force.
Serangan brute-force merupakan metode password cracking yang secara signifikan lebih kuat daripada serangan metode kamus. 
Sebuah program brute force attack akan mencoba setiap kombinasi karakter yang mungkin mencapai set pada password yang tepat. 
Ini sangat memakan waktu karena ada huruf yang mungkin tak terhitung jumlahnya, nomor yang banyak dan kombinasi simbol dari 
seorang individu yang bisa digunakan untuk password.

### Tools Password Cracking

#### THC-Hydra
THC-Hydra adalah tool yang sangat cepat(multi-threading) untuk melakukan crack password pada sistem authentifikasi jaringan yang mensupport berbagai layanan seperti : afp, cisco, cisco-enable, cvs, firebird, ftp, http-get, http-head, http-proxy, https-get, https-head, httpsform-get, https-form-post, icq, imap, imap-ntlm, ldap2, ldap3, mssql, mysql, ncp, nntp, oracle-listener, pcanywhere, pcnfs, pop3, pop3-ntlm, postgres, rexec, rlogin, rsh, sapr3, sip, smb, smbnt, smtp-auth, smtp-authntlm, snmp, socks5, ssh2, svn, teamspeak, telnet, vmauthd, vnc.

#### Ncrack
Ncrack adalah alat cracking otentikasi jaringan berkecepatan tinggi. Ini dibangun untuk membantu perusahaan mengamankan jaringan mereka dengan secara proaktif menguji semua host dan perangkat jaringan mereka yang memiliki kata kunci yang buruk. Ncrack dirancang menggunakan pendekatan modular. Hal ini memungkinkan dilakukannya audit berskala besar yang cepat namun dapat diandalkan dari beberapa host.
Fitur Ncrack memungkinkan serangan bruteforcing yang kompleks. Protokol yang didukung meliputi RDP, SSH, HTTP (S), SMB, POP3 (S), VNC, FTP, SIP, Redis, PostgreSQL, MySQL, dan Telnet.

#### Medusa
Medusa deskripsikan sebagai "brute forcer yang cepat, massively pararel, modular", dengan modul yang tersedia mendukung hampir semua layanan yang memungkinkan otentikasi jarak jauh menggunakan password, termasuk: CVS, FTP, HTTP, IMAP, MS-SQL, MySQL, POP3, PostgreSQL, SMTP-AUTH, Telnet dan VNC. Medusa telah dirancang untuk berjalan lebih cepat daripada Hydra dengan menggunakan pengujian paralel berbasis thread (Hydra's berbasis proses) untuk melakukan penetrasi ke beberapa host atau pengguna secara bersamaan.

### Password Cracking Counter Measure
## Penetration Testing 1 : Password Cracking
### Spesifikasi
Pada simulasi penetration testing ini digunakan dua virtual machine yang di host pada satu machine.
##### Host Machine
 - CPU : Intel Core i7-4720HQ @ 2.60Hz 8 Cores
 - Memory : 12288 MB RAM DDR3
 - Operating System : Windows 10 Pro 64-bit
 - VRAM : 2019 MB

##### Virtual Machine Target
 - CPU :  2 Cores CPU
 - Memory : 2048 MB
 - Operating System : Ubuntu Server 16.04.3
 - VRAM : 16MB

##### Virtual Machine Penetration Tester 
 - CPU :  2 Cores CPU
 - Memory : 2048 MB
 - Operating System : Kali Linux 2017.2
 - VRAM : 16MB
### Instalasi
#### Instalasi Operating System
##### Instalasi Ubuntu Server
1. Download ubuntu server https://www.ubuntu.com/download/server
2. Buka virtual box, lalu pilih new
3. pilih tipe ubuntu
4. beri nama sesuai yang diinginkan
5. beri ukuran memory ram sesuai kebutuhan
6. pilih create virtual hardisk now
7. lalu pilih tipe file VHD (Virtual Hard Disk)
8. pada option storage on physical hardisk pilih fixed size 
9. beri ukuran harddisk sesuai kebutuhan, disarankan menggunakan opsi default 8gb
10. virtual machine telah dibuat
11. pilih opsi setting pada virtual machine yang telah dibuat
12. pilih menu storage
13. klik icon cd (Empty) 
14. klik icon cd pada tab atribut
15. pilih menu choose virtual optical disk
16. pilih file iso ubuntu server yang telah di download
17. pilih menu network
18. pada adapter 1 pilih host only adapter
19. pada adapter 2 pilih NAT
20. klik start lalu install ubuntu server 
##### Instalasi Kali Linux
1. Download Kali Linux https://www.kali.org/downloads/
2. Buka virtual box, lalu pilih new
3. pilih tipe ubuntu
4. beri nama sesuai yang diinginkan
5. beri ukuran memory ram sesuai kebutuhan
6. pilih create virtual hardisk now
7. lalu pilih tipe file VHD (Virtual Hard Disk)
8. pada option storage on physical hardisk pilih fixed size 
9. beri ukuran harddisk sesuai kebutuhan, minimal 20 gb
10. virtual machine telah dibuat
11. pilih opsi setting pada virtual machine yang telah dibuat
12. pilih menu system
13. pilih tab processor
14. centang enable PAE/ NX
15. pilih menu storage
16. klik icon cd (Empty) 
17. klik icon cd pada tab atribut
18. pilih menu choose virtual optical disk
19. pilih file iso kali linux yang telah di download
20. pilih menu network
21. pada adapter 1 pilih host only adapter
22. pada adapter 2 pilih NAT
23. klik start lalu install ubuntu server 
#### Instalasi Tools
##### Instalasi SSH Server
Agar dapat terkoneksi ke internet gunakan adapter dengan konfigurasi NAT. 
Pada Environment testing adapter NAT berapa pada interface <b>enp0s8</b> dan Host-Only adapter pada interface <b>enp0s3</b>
Lakukan konfigurasi pada enp0s8
```sh
$ sudo nano /etc/network/interfaces
```
Tambahkan line berikut kemudian save
```
auto enp0s8
iface enp0s8 inet dhcp
```
Switch adapter dari enp0s3 ke enp0s8
```sh
$ sudo /etc/init.d/networking restart
$ sudo ifdown enp0s3 && ifup enp0s8
```
Kemudian install Open SSH Server
```sh
$ sudo apt-get update && apt-get upgrade
$ sudo apt install openssh-server
```
##### Instalasi THC Hydra
THC Hydra merupakan tools default yang ada pada distro Kali Linux sehingga tidak memerlukan proses instalasi.
Wordlist yang digunakan pada pentest ini adalah:

> https://github.com/jeanphorn/wordlist/blob/master/ssh_passwd.txt

Pada wordlist ini terdapat 80000 lebih list common password untuk SSH. Wordlist ini juga akan digunakan untuk tools Ncrack dan medusa

##### Instalasi Ncrack
Ncrack merupakan tools default yang ada pada distro Kali Linux sehingga tidak memerlukan proses instalasi.

##### Instalasi Medusa
Medusa merupakan tools default yang ada pada distro Kali Linux sehingga tidak memerlukan proses instalasi.

#### Brute Force attack Tanpa Countermeasure

##### Hydra
untuk melakukan brute force attack menggunakan Hydra
```
$ hydra -t -4 -l faiq -P '/root/Desktop/password.txt' 192.168.56.102 ssh
```
https://user-images.githubusercontent.com/27672837/31996825-16e64f52-b9b4-11e7-8738-447b5fa05590.JPG
##### Ncrack
untuk melakukan brute force attack menggunakan Ncrack
```
$ ncrack -U '/root/Desktop/user.txt' -P '/root/Desktop/password.txt' 192.168.56.1 -p ssh
```
##### Medusa
untuk melakukan brute force attack menggunakan Medusa
```
$ medusa -h 192.168.56.102 -U '/root/Desktop/user.txt' -P '/root/Desktop/password.txt' -M ssh
```



