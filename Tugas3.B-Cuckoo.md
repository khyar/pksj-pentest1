# Malware Analisys Mengunnakan Cuckoo
## Cuckoo

> Cuckoo adalah suatu framework analisis malware terotomatisasi yang dapat melakukan analisa perilaku dan menentukan jenis malware dengan menjalankan malware tersebut dalam sebuah sandbox yang dimonitoring activitinya. Cuckoo dapat  melakukan analisa pada berbagai jenis tipe file seperti : Executables Windows (EXE), file DLL, PDF, office document, halaman web, PHP, dll. 

> Cuckoo dapat menampilkan analisa dan melakukan trace terhadap API calls yang dijalankan proses yang terinfeksi malware, file apa saja yang diakses,dibuat,dihapus oleh malware, menyimpan memori dan network dumps dari proses malware.

### Instalasi Cuckoo
Dalam proses instalasi Cuckoo terdapat dua aktor yaitu Host dan Guest.
Host adalah OS yang akan melakukan analysis malware dan Guest adalah OS dimana malaware akan dicoba dijalankan atau sebagai target machine.

Pada pentest ini OS yagn digunakan sebagai Host adalah **Linux Mint 16.0 Petra** sedangkan OS yang digunakan sebagai Guest adalah **Windows XP SP3** yang dijalankan di VirtualBox.

#### Instalasi Pada Host OS
Pada Host OS akan diinstall Cuckoo yang berperan sebagai *Malware Analisys Tool*.

1. Install python & *pre-requirement library* 

Karena Cuckoo berjalan diatas python maka perlu diinstall *dependency* python, python-pip, python-dev dll.

```sh
$ sudo apt-get install python python-pip python-dev libffi-dev libssl-dev
$ sudo apt-get install python-virtualenv python-setuptools
$ sudo apt-get install libjpeg-dev zlib1g-dev swig
```

2. Mongo DB

Untuk menampilkan interface Web dari aplikasi Cuckoo diperlukan **mongodb**.
Proses instalasi mongodb.

```sh
$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv 2930ADAE8CAF5059EE73BB4B58712A2291FA4AD5
$ echo "deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu xenial/mongodb-org/3.6 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-3.6.list
$ sudo apt-get update
$ sudo apt-get install -y mongodb-org
```

3. TCP Dump

```sh
$ apt-get install tcpdump
```

```sh
$ sudo setcap cap_net_raw,cap_net_admin=eip /usr/sbin/tcpdump
$ sudo getcap /usr/sbin/tcpdump
```

4. Yara

```sh
$ sudo apt-get install autoconf libtool libjansson-dev libmagic-dev libssl-dev -y
$ wget https://github.com/VirusTotal/yara/archive/v3.7.0.tar.gz -O yara-3.7.0.tar.gz
$ tar -zvxf yara-3.7.0.tar.gz 
$ cd yara-3.7.0/
$ ./bootstrap.sh
$ ./configure --with-crypto --enable-cuckoo --enable-magic
$ make && make install
```

5. PyDeep

```sh
# git clone https://github.com/volatilityfoundation/volatility.git
# cd volatility
# python setup.py build
# python setup.py install
# python vol.py -h
```
